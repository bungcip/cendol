---
source: src/tests/semantic_mir.rs
expression: mir_dump
---
type %t0 = i32
type %t1 = i8
type %t2 = ptr<%t1>
type %t3 = void
type %t4 = u64
type %t5 = fn(%t2, ...) -> %t0
type %t6 = [13]%t1
type %t7 = [13]%t1
type %t8 = [7]%t1
type %t9 = [7]%t1

global @.L.str0: [13]i8 = const "timeout=%ld\n"
global @.L.str1: [7]i8 = const "error\n"

fn main() -> i32
{

  bb15:
    return const 0
}

extern fn printf(%param0: ptr<i8>, ...) -> i32

fn kb_wait_1() -> void
{
  locals {
    %timeout: u64
    %i: i32
    %4: i32
    %5: i32
  }

  bb1:
    %timeout = cast<u64>(const 2)
    br bb4

  bb2:
    call printf(cast<ptr<i8>>(const @.L.str1))
    br bb12

  bb3:
    cond_br %timeout, bb4, bb5

  bb4:
    cond_br const 1, bb6, bb7

  bb5:
    return

  bb6:
    call printf(cast<ptr<i8>>(const @.L.str0), %timeout)
    br bb8

  bb7:
    %i = const 1
    br bb9

  bb8:
    %timeout = %timeout + const -1
    br bb3

  bb9:
    cond_br const 1, bb10, bb11

  bb10:
    br bb12

  bb11:
    br bb2

  bb12:
    %4 = %i
    %5 = %i + const -1
    %i = %5
    cond_br %4, bb13, bb14

  bb13:
    br bb2

  bb14:
    br bb9
}
